local WindUI = loadstring(game:HttpGet("https://github.com/Footagesus/WindUI/releases/latest/download/main.lua"))()

local Players = game:GetService("Players")
local Lighting = game:GetService("Lighting")
local RunService = game:GetService("RunService")
local VirtualUser = game:GetService("VirtualUser")
local TweenService = game:GetService("TweenService")
local Stats = game:GetService("Stats")
local player = Players.LocalPlayer


local Window = WindUI:CreateWindow({
    Title = "TeeHub - Universal",
    Icon = "activity",
    Folder = "teehub",
    Size = UDim2.fromOffset(580, 460),
    MinSize = Vector2.new(560, 350),
    MaxSize = Vector2.new(850, 560),
    Transparent = true,
    Theme = "Dark",
    Resizable = true,
    SideBarWidth = 200,
    BackgroundImageTransparency = 0.42,
    HideSearchBar = true,
    ScrollBarEnabled = false,
    User = {
        Enabled = true,
        Anonymous = false,
        Callback = function()
            WindUI:Notify({
                Title = "Your Profile",
                Content = "literally you lol",
                Duration = 3,
            })
        end
    }
})

local Main = Window:Tab({ Title = "Main", Icon = "box", Locked = false })
local Player = Window:Tab({ Title = "Player", Icon = "user", Locked = false })
local Tele = Window:Tab({ Title = "Teleports", Icon = "cloud", Locked = false })
local Misc = Window:Tab({ Title = "Misc", Icon = "cpu", Locked = false })

local gui = Instance.new("ScreenGui")
gui.ResetOnSpawn = false
gui.IgnoreGuiInset = true
gui.Parent = player:WaitForChild("PlayerGui")

local black = Instance.new("Frame")
black.Parent = gui
black.Size = UDim2.fromScale(1, 1)
black.Position = UDim2.fromScale(0, 0)
black.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
black.ZIndex = 5
black.Visible = false
black.Active = false

for _, v in ipairs(Lighting:GetChildren()) do
    if v:IsA("BloomEffect") or v:IsA("SunRaysEffect") or v:IsA("DepthOfFieldEffect") or v:IsA("ColorCorrectionEffect") then
        v:Destroy()
    end
end

local states = {
    screenMode = false,
    potatoMode = false,
    noLights   = false,
    antiIdle   = false,
}

local renderConn
local lightConn
local antiIdleConn

Misc:Toggle({
    Title = "Anti-AFK",
    Icon = "activity",
    Default = false,
    Callback = function(state)
        states.antiIdle = state
        if state then
            antiIdleConn = player.Idled:Connect(function()
                VirtualUser:CaptureController()
                VirtualUser:ClickButton2(Vector2.new())
            end)
        else
            if antiIdleConn then antiIdleConn:Disconnect(); antiIdleConn = nil end
        end
    end,
})

local function applyNoLights(on)
    for _, v in ipairs(workspace:GetDescendants()) do
        if v:IsA("PointLight") or v:IsA("SpotLight") or v:IsA("SurfaceLight") then
            v.Enabled = not on
        end
    end
    if on then
        if not lightConn then
            lightConn = workspace.DescendantAdded:Connect(function(obj)
                if states.noLights then
                    if obj:IsA("PointLight") or obj:IsA("SpotLight") or obj:IsA("SurfaceLight") then
                        obj.Enabled = false
                    end
                end
            end)
        end
    else
        if lightConn then lightConn:Disconnect(); lightConn = nil end
    end
end

local function applyPotatoMode(on)
    for _, obj in ipairs(workspace:GetDescendants()) do
        if obj:IsA("BasePart") then
            if on then
                obj.Material = Enum.Material.Plastic
                obj.Reflectance = 0
                obj.CastShadow = false
            else
                obj.CastShadow = true
            end
        elseif obj:IsA("Texture") or obj:IsA("Decal") or obj:IsA("SurfaceAppearance") then
            obj.Transparency = on and 1 or 0
        end
    end
end

Misc:Toggle({
    Title = "Potato Mode",
    Icon = "cpu",
    Default = false,
    Callback = function(state)
        states.potatoMode = state
        states.noLights = state

        applyPotatoMode(state)
        applyNoLights(state)

        Lighting.GlobalShadows = not state
        Lighting.EnvironmentDiffuseScale  = state and 0 or 1
        Lighting.EnvironmentSpecularScale = state and 0 or 1
    end,
})

Misc:Toggle({
    Title = "3D-Render",
    Icon = "monitor-off",
    Desc = "Black screen + 3D-rendering disabled",
    Default = false,
    Callback = function(state)
        states.screenMode = state
        black.Visible = state

        if state then
            renderConn = RunService.RenderStepped:Connect(function()
                RunService:Set3dRenderingEnabled(false)
            end)
        else
            if renderConn then renderConn:Disconnect(); renderConn = nil end
            RunService:Set3dRenderingEnabled(true)
        end
    end,
})

Misc:Divider()

Misc:Keybind({
    Title = "Close Window",
    Desc = "Keybind to close & open menu",
    Value = "RightAlt",
    Callback = function(v)
        Window:SetToggleKey(Enum.KeyCode[v])
    end,
})

player.CharacterAdded:Connect(function()
    task.wait(1)
    if states.noLights then applyNoLights(true) end
    if states.potatoMode then applyPotatoMode(true) end
end)
